---
- name: test credentials
  hosts: credtest
  gather_facts: no
  tasks:
  # show username and password from machine credential
  - name: credtest: Show machine credentials
    debug:
      msg: "Machine username = {{ ansible_user }} password = {{ ansible_password }}"

  - name: credtest: catch machine account
    set_fact:
      machine_user = "{{ ansible_user }}"
      machine_password = "{{ ansible_password }}"

  # show username and password from machine credential
  - name: Show catched machine credentials
    debug:
      msg: "Machine username = {{ machine_user }} password = {{ machine_password }}"
      
- name: localhost
  hosts: localhost
  gather_facts: no

  tasks:
  # show username and password from machine credential
  - name: localhost: Show machine credentials
    debug:
      msg: "Machine username = {{ ansible_user }} password = {{ ansible_password }}"

  # show username and password from machine credential
  - name: localhost: Show catched machine credentials
    debug:
      msg: "Machine username = {{ machine_user }} password = {{ machine_password }}"
      
#  - name: ping it
#    ping:
